{
  "content": {
    "modulesContent": {
      "$edgeAgent": {
        "properties.desired.modules": {
          "opcPlc": {
            "version": "1.0",
            "type": "docker",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
              "image": "mcr.microsoft.com/iotedge/opc-plc:latest",
              "createOptions": "{\"Hostname\":\"opcPlc\",\"Cmd\":[\"--pn=50000\",\"--autoaccept\"],\"HostConfig\":{\"PortBindings\":{\"50000/tcp\":[{\"HostPort\":\"50000\"}],\"8080/tcp\":[{\"HostPort\":\"8080\"}]}}}"
            }
          },
          "opcPublisher": {
            "type": "docker",
            "version": "1.0",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
                "image": "mcr.microsoft.com/iotedge/opc-publisher:latest",
                "createOptions": "{\"Hostname\":\"opcPublisher\",\"Cmd\":[\"publisher\",\"--aa\",\"--pf=/appdata/publishednodes.json\"],\"HostConfig\":{\"PortBindings\":{\"9080/tcp\":[{\"HostPort\":\"9080\"}]},\"Binds\":[\"/appdata:/appdata\"]}}"
            }
          },
          "opcToDtdl": {
            "type": "docker",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
              "image": "marvingarcia/iotedge-opc-dtdl:latest",
              "createOptions": "{\"Env\":[\"DefaultApplicationUri=OpcPlc\",\"NodeIdRegex=#[is]=([a-zA-Z0-9_.]+)\",\"ApplicationUriRegex=(.*)\"]}"
            }
          },
          "anomalyDetection": {
            "type": "docker",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
                "image": "mcr.microsoft.com/azure-stream-analytics/azureiotedge:1.0.8",
                "createOptions": ""
            },
            "env": __ASA_ENV__
          }
        }
      },
      "$edgeHub": {
        "properties.desired.routes": {
          "PublisherToTranslator": "FROM /messages/modules/opcPublisher/* INTO BrokeredEndpoint(\"modules/opcToDtdl/inputs/opc\")",
          "TranslatorToHub": "FROM /messages/modules/opcToDtdl/outputs/dtdl INTO $upstream",
          "TranslatorToAnomalyDetection": "FROM /messages/modules/opcToDtdl/outputs/dtdl INTO BrokeredEndpoint(\"modules/anomalyDetection/input/__ASA_INPUT_NAME__\")",
          "AnomalyDetectionToHub": "FROM /messages/modules/anomalyDetection/outputs/* INTO $upstream"
        }
      },
      "anomalyDetection": {
        "properties.desired": __ASA_DESIRED_PROPERTIES__
      }
    }
  }
}